---
phase: 07-ux-polish
plan: 05
type: execute
wave: 2
depends_on: ["07-01"]
files_modified:
  - maguey-pass-lounge/src/pages/Checkout.tsx
  - maguey-pass-lounge/src/pages/Events.tsx
  - maguey-pass-lounge/src/pages/VIPTablesPage.tsx
autonomous: true

must_haves:
  truths:
    - "Event listing shows skeleton cards while loading"
    - "Checkout buttons show loading state during payment"
    - "VIP table listing shows skeleton cards while loading"
  artifacts:
    - path: "maguey-pass-lounge/src/pages/Checkout.tsx"
      provides: "Checkout with LoadingButton integration"
      contains: "LoadingButton"
    - path: "maguey-pass-lounge/src/pages/Events.tsx"
      provides: "Events with skeleton loading states"
      contains: "EventCardSkeleton"
    - path: "maguey-pass-lounge/src/pages/VIPTablesPage.tsx"
      provides: "VIP tables with skeleton loading states"
      contains: "TableCardSkeleton"
  key_links:
    - from: "Checkout.tsx"
      to: "@/components/ui/loading-button"
      via: "payment button"
      pattern: "import.*LoadingButton.*from.*loading-button"
    - from: "Events.tsx"
      to: "@/components/ui/skeleton-card"
      via: "event grid loading"
      pattern: "import.*EventCardSkeleton.*from.*skeleton-card"
---

<objective>
Integrate loading state components into maguey-pass-lounge pages: skeleton screens for content loading and loading buttons for actions.

Purpose: Replaces generic loading indicators with content-matched skeletons that prevent layout shift. Ensures all async buttons disable during processing to prevent double-submissions.

Output: Checkout.tsx, Events.tsx, and VIPTablesPage.tsx updated with LoadingButton and skeleton components from 07-01.
</objective>

<execution_context>
@/Users/luismiguel/.claude/get-shit-done/workflows/execute-plan.md
@/Users/luismiguel/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-ux-polish/07-CONTEXT.md
@.planning/phases/07-ux-polish/07-RESEARCH.md
@maguey-pass-lounge/src/pages/Checkout.tsx
@maguey-pass-lounge/src/pages/Events.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Integrate loading states into Checkout.tsx</name>
  <files>
    maguey-pass-lounge/src/pages/Checkout.tsx
  </files>
  <action>
Update Checkout.tsx to use LoadingButton for payment actions and skeletons for event/ticket loading.

Changes to make:

1. Import LoadingButton and skeleton components:
```typescript
import { LoadingButton } from "@/components/ui/loading-button";
import { EventCardSkeleton, TicketCardSkeleton } from "@/components/ui/skeleton-card";
```

2. Replace the "Complete Purchase" button with LoadingButton:
```tsx
// Find the submit button (around line 400+) and replace with:
<LoadingButton
  type="submit"
  isLoading={isLoading}
  loadingText="Processing payment..."
  className="w-full h-14 text-lg font-bold"
  disabled={total === 0 || !event}
>
  Complete Purchase - ${total.toFixed(2)}
</LoadingButton>
```

3. Add skeleton loading for event details (when eventLoading is true):
```tsx
// Replace the loading state section (around line 200+) with:
{eventLoading && (
  <div className="space-y-4">
    <EventCardSkeleton />
    <div className="grid gap-4">
      <TicketCardSkeleton />
      <TicketCardSkeleton />
    </div>
  </div>
)}
```

4. Add skeleton loading for ticket types while they load:
```tsx
// In the ticket selection section, show skeletons while loading
{event && !availability && (
  <div className="grid gap-4">
    {[1, 2, 3].map((i) => <TicketCardSkeleton key={i} />)}
  </div>
)}
```

5. Ensure all other buttons have disabled states during isLoading:
- Quantity increment/decrement buttons should be disabled during payment
- Apply promo code button should be disabled during payment
  </action>
  <verify>
Checkout.tsx updated:
- `grep "LoadingButton" maguey-pass-lounge/src/pages/Checkout.tsx`
- `grep "EventCardSkeleton" maguey-pass-lounge/src/pages/Checkout.tsx`
- `grep "TicketCardSkeleton" maguey-pass-lounge/src/pages/Checkout.tsx`
- `grep "Processing payment" maguey-pass-lounge/src/pages/Checkout.tsx`
  </verify>
  <done>Checkout.tsx uses LoadingButton for payment, EventCardSkeleton and TicketCardSkeleton for loading states, all buttons disabled during processing.</done>
</task>

<task type="auto">
  <name>Task 2: Add skeleton loading to Events.tsx</name>
  <files>
    maguey-pass-lounge/src/pages/Events.tsx
  </files>
  <action>
Update Events.tsx to show skeleton cards while events are loading.

Changes to make:

1. Import skeleton component:
```typescript
import { EventCardSkeleton } from "@/components/ui/skeleton-card";
```

2. Find the loading state section (where events are loading) and replace with skeleton grid:
```tsx
// Replace any "Loading..." text or Loader2 spinner with:
{isLoading && (
  <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
    {[1, 2, 3, 4, 5, 6].map((i) => (
      <EventCardSkeleton key={i} />
    ))}
  </div>
)}
```

3. Also show skeletons during initial page load:
```tsx
// If there's an early return for loading state, show skeletons instead
if (loading) {
  return (
    <div className="container mx-auto px-4 py-8">
      <Skeleton className="h-8 w-48 mb-6" /> {/* Page title skeleton */}
      <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        {[1, 2, 3, 4, 5, 6].map((i) => (
          <EventCardSkeleton key={i} />
        ))}
      </div>
    </div>
  );
}
```

4. Remove any Loader2 spinner usage for content loading (keep for actions like refresh).

The skeleton grid should match the actual event grid layout to prevent layout shift.
  </action>
  <verify>
Events.tsx updated:
- `grep "EventCardSkeleton" maguey-pass-lounge/src/pages/Events.tsx`
- `grep -c "Loader2" maguey-pass-lounge/src/pages/Events.tsx` returns 0 or only for action buttons
  </verify>
  <done>Events.tsx shows EventCardSkeleton grid during loading instead of spinner, matching the actual grid layout.</done>
</task>

<task type="auto">
  <name>Task 3: Add skeleton loading to VIPTablesPage.tsx</name>
  <files>
    maguey-pass-lounge/src/pages/VIPTablesPage.tsx
  </files>
  <action>
Update VIPTablesPage.tsx to show skeleton cards while VIP tables are loading.

Changes to make:

1. Import skeleton components:
```typescript
import { TableCardSkeleton } from "@/components/ui/skeleton-card";
import { LoadingButton } from "@/components/ui/loading-button";
```

2. Replace loading state with skeleton grid:
```tsx
{isLoading && (
  <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
    {[1, 2, 3, 4].map((i) => (
      <TableCardSkeleton key={i} />
    ))}
  </div>
)}
```

3. Replace any "Reserve Table" or action buttons with LoadingButton:
```tsx
<LoadingButton
  isLoading={isReserving}
  loadingText="Reserving..."
  onClick={handleReserve}
>
  Reserve Table
</LoadingButton>
```

4. Ensure table selection and booking buttons disable during async operations.

5. If there's a floor plan view, add appropriate loading state (can be a simple skeleton of the floor plan dimensions).
  </action>
  <verify>
VIPTablesPage.tsx updated:
- `grep "TableCardSkeleton" maguey-pass-lounge/src/pages/VIPTablesPage.tsx`
- `grep "LoadingButton" maguey-pass-lounge/src/pages/VIPTablesPage.tsx`
  </verify>
  <done>VIPTablesPage.tsx shows TableCardSkeleton during loading and uses LoadingButton for reservation actions.</done>
</task>

</tasks>

<verification>
After completing all tasks:
1. No TypeScript errors: `cd maguey-pass-lounge && npx tsc --noEmit`
2. All three pages import from loading-button and skeleton-card
3. No Loader2 spinners for content loading (only for action buttons if needed)
4. Grid layouts match between skeletons and actual content
</verification>

<success_criteria>
- Checkout shows skeleton cards while loading event/ticket data
- Events page shows skeleton grid while fetching events
- VIP Tables page shows skeleton grid while fetching tables
- All payment/reservation buttons show loading state during async operations
- No layout shift when content loads (skeletons match content dimensions)
</success_criteria>

<output>
After completion, create `.planning/phases/07-ux-polish/07-05-SUMMARY.md`
</output>
