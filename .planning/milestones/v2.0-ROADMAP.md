# v2.0 Launch Readiness — Roadmap

**Milestone:** v2.0 Launch Readiness
**Created:** 2026-02-13
**Timeline:** 1–2 weeks (aggressive)
**Phases:** 10 (numbered 14–23, continuing from v1.0)
**Plans:** 35 total

---

## Phase Overview

| Phase | Name | Plans | Priority | Effort | Status |
|-------|------|-------|----------|--------|--------|
| 14 | Auth Foundation & Account Setup | 3 | P0 | 2 days | Complete (2026-02-13) |
| 15 | Auth Hardening & Login Flows | 3 | P0 | 2 days | Complete (2026-02-13) |
| 16 | Route Protection | 2 | P0 | 1.5 days | Complete (2026-02-14) |
| 17 | Security Lockdown | 4 | P0 | 2 days | Planned |
| 18 | Scanner Improvements | 4 | P1 | 2 days | Complete (2026-02-14) |
| 19 | Dashboard Data Accuracy | 3 | P1 | 2 days | Not Started |
| 20 | Dashboard & UI Bloat Cleanup | 4 | P1 | 2 days | Not Started |
| 21 | VIP & Events Polish | 5 | P1 | 2 days | Not Started |
| 22 | Code Quality & Refactoring | 4 | P1 | 3 days | Not Started |
| 23 | CI/CD & Production Deployment | 3 | P0 | 1.5 days | Not Started |

**Total:** 35 plans across 10 phases (~12 working days)

---

## Dependency Graph

```
Phase 14 (Auth Foundation) ──→ Phase 15 (Login Flows) ──→ Phase 16 (Route Protection)
                                                                  │
Phase 17 (Security) ─────────────────────────────────────→ Phase 18 (Scanner)
                                                                  │
Phase 14 ─────────────────────────────────────────────→ Phase 19 (Dashboard)
                                                                  │
Phase 16 ─────────────────────────────────────────────→ Phase 20 (Bloat Cleanup)
                                                                  │
Phase 21 (VIP/Events) ─── independent ───────────────→ can run in parallel
                                                                  │
Phases 14-16 ─────────────────────────────────────────→ Phase 22 (Code Quality)
                                                                  │
All phases ───────────────────────────────────────────→ Phase 23 (CI/CD & Deploy)
```

## Parallel Execution Tracks

**Days 1–4 (P0 Blockers):**
- Track A: Phase 14 → 15 → 16 (auth pipeline, sequential)
- Track B: Phase 17 (security, independent)

**Days 5–9 (P1 Improvements):**
- Track A: Phase 18 (scanner) + Phase 19 (dashboard)
- Track B: Phase 20 (bloat) + Phase 21 (VIP/events)
- Track C: Phase 22 (code quality)

**Days 10–12 (Deployment):**
- Phase 23 (CI/CD + Stripe production + Vercel)

---

## Phase Details

### Phase 14: Auth Foundation & Account Setup
**Priority:** P0 | **Effort:** 2 days | **Dependencies:** None

| Plan | Objective | Requirements | Wave |
|------|-----------|-------------|------|
| 14-01 | Create Supabase auth accounts (owner + employee) + verification script | R10, R11 | 1 |
| 14-02 | Wire AuthContext to real Supabase auth, gate localStorage behind DEV | R12, R09 | 2 |
| 14-03 | Credential verification automation (env consistency, key validation) | R35, R36, R37 | 1 |

### Phase 15: Auth Hardening & Login Flows
**Priority:** P0 | **Effort:** 2 days | **Dependencies:** Phase 14

| Plan | Objective | Requirements | Wave |
|------|-----------|-------------|------|
| 15-01 | Separate owner login flow (/auth/owner) | R07 | 1 |
| 15-02 | Separate employee login flow (/auth/employee) | R07 | 1 |
| 15-03 | Remove demo shortcuts and gate dev tools behind DEV flag | R08 | 2 |

### Phase 16: Route Protection
**Priority:** P0 | **Effort:** 1.5 days | **Dependencies:** Phase 14, 15

| Plan | Objective | Requirements | Wave |
|------|-----------|-------------|------|
| 16-01 | Create ProtectedRoute component with role-based guards | R06 | 1 |
| 16-02 | Wrap all 30+ routes with ProtectedRoute in App.tsx | R06 | 2 |

### Phase 17: Security Lockdown
**Priority:** P0 | **Effort:** 2 days | **Dependencies:** None

| Plan | Objective | Requirements | Wave |
|------|-----------|-------------|------|
| 17-01 | Move QR signing secret to server-side Edge Function | R01 | 1 |
| 17-02 | Set ALLOWED_ORIGINS env var, update CORS handler | R03 | 1 |
| 17-03 | Audit and fix VIP RLS policies (remove anon access) | R05 | 1 |
| 17-04 | Reject unsigned QR codes in scanner | R23 | 2 |

### Phase 18: Scanner Improvements
**Priority:** P1 | **Effort:** 2 days | **Dependencies:** Phase 17

| Plan | Objective | Requirements | Wave |
|------|-----------|-------------|------|
| 18-01 | Auto-detect tonight's event + date display in dropdown | R19, R20 | 1 |
| 18-02 | Offline mode: reject unknown tickets | R21 | 1 |
| 18-03 | Log failed scans to server scan_logs | R22 | 1 |
| 18-04 | Rate limit manual entry + display device ID | R24, R25 | 1 |

### Phase 19: Dashboard Data Accuracy
**Priority:** P1 | **Effort:** 2 days | **Dependencies:** Phase 14
**Plans:** 3 plans

Plans:
- [ ] 19-01-PLAN.md — Verify revenue trends + fix ticket_count/ticket_type on orders (R13, R14, R15)
- [ ] 19-02-PLAN.md — Display staff names instead of UUIDs (R16)
- [ ] 19-03-PLAN.md — Optimize real-time subscriptions with targeted refresh (R17)

| Plan | Objective | Requirements | Wave |
|------|-----------|-------------|------|
| 19-01 | Verify revenue trends + fix ticket_count and ticket_type on orders | R13, R14, R15 | 1 |
| 19-02 | Display staff names instead of UUIDs | R16 | 1 |
| 19-03 | Optimize real-time subscriptions (targeted updates) | R17 | 2 |

### Phase 20: Dashboard & UI Bloat Cleanup
**Priority:** P1 | **Effort:** 2 days | **Dependencies:** Phase 16
**Plans:** 4 plans

Plans:
- [ ] 20-01-PLAN.md — Gate 6 monitoring routes behind requireDev and hide MONITORING sidebar in production
- [ ] 20-02-PLAN.md — Add System Health item and verify simplified sidebar structure
- [ ] 20-03-PLAN.md — Rename Analytics tabs, fix Fraud layout, simplify Notification Rules
- [ ] 20-04-PLAN.md — Gate NFC behind feature flag and confirm dead code component status

| Plan | Objective | Requirements | Wave |
|------|-----------|-------------|------|
| 20-01 | Gate monitoring routes/sidebar behind requireDev | R39–R43 | 1 |
| 20-02 | Implement simplified sidebar with System Health | R44–R49 | 2 |
| 20-03 | Simplify Analytics, Fraud, Notifications | R18, R46–R48 | 1 |
| 20-04 | Gate NFC behind feature flag, confirm dead code | R50–R58 | 1 |

### Phase 21: VIP & Events Polish
**Priority:** P1 | **Effort:** 2 days | **Dependencies:** None

| Plan | Objective | Requirements | Wave |
|------|-----------|-------------|------|
| 21-01 | VIP floor plan drag-drop positioning | R26 | 1 |
| 21-02 | VIP invite link one-tap sharing | R27 | 1 |
| 21-03 | Explicit VIP table sync to purchase site | R28 | 1 |
| 21-04 | Remove hardcoded fallback events on marketing site | R29 | 1 |
| 21-05 | Add sitemap.xml, robots.txt, JSON-LD structured data | R30 | 1 |

### Phase 22: Code Quality & Refactoring
**Priority:** P1 | **Effort:** 3 days | **Dependencies:** Phases 14–16

| Plan | Objective | Requirements | Wave |
|------|-----------|-------------|------|
| 22-01 | Split orders-service.ts (2,600 lines) into modules | R31 | 1 |
| 22-02 | Split AuthContext.tsx (840 lines) into providers | R32 | 1 |
| 22-03 | Organize 150+ flat components into domain directories | R33 | 1 |
| 22-04 | Enable TypeScript strict mode on marketing site | R34 | 1 |

### Phase 23: CI/CD & Production Deployment
**Priority:** P0 | **Effort:** 1.5 days | **Dependencies:** All previous phases

| Plan | Objective | Requirements | Wave |
|------|-----------|-------------|------|
| 23-01 | Configure GitHub Actions secrets + enable CI/CD | R04 | 1 |
| 23-02 | Switch Stripe to production keys + verify payments | R02 | 2 |
| 23-03 | Set all Vercel environment variables + deployment verification | R38 | 2 |

---

## Success Criteria

v2.0 is complete when:
1. All 12 P0 blockers resolved and verified
2. All 26 P1 items resolved and verified
3. 20 bloat items addressed (removed, simplified, or assessed)
4. All 3 sites build and deploy to Vercel without errors
5. CI/CD pipeline runs green
6. Stripe processes real payments in production mode
7. Maguey-GSD-Framework.xlsx updated with all items marked DONE + Verified
