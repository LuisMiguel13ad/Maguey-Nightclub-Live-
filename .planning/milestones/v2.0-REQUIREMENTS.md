# v2.0 Launch Readiness — Requirements

**Milestone:** v2.0 Launch Readiness
**Created:** 2026-02-13
**Scope:** P0 blockers (12) + P1 high priority (26) + Bloat cleanup (20) = 58 items
**Timeline:** 1–2 weeks (aggressive)
**Source:** Maguey-GSD-Framework.xlsx + Maguey-Nightclub-Full-System-Analysis.docx

---

## P0 Blockers — Must Fix Before Launch (12 items)

### Security (5 items)

| Req | ID | Issue | Area | Effort |
|-----|------|-------|------|--------|
| R01 | GSD-1 | VITE_QR_SIGNING_SECRET exposed client-side | Scanner + Marketing | 1 day |
| R02 | GSD-2 | Stripe in test mode (pk_test_ / sk_test_) | Ticket Purchase | 1 day |
| R03 | GSD-3 | ALLOWED_ORIGINS not set for production | Edge Functions | 1 day |
| R04 | GSD-4 | CI/CD pipeline disabled (needs secrets) | GitHub Actions | 1 day |
| R05 | GSD-5 | Anon access on VIP reservation data | Supabase RLS | 1 day |

### Authentication (4 items)

| Req | ID | Issue | Area | Effort |
|-----|------|-------|------|--------|
| R06 | GSD-6 | Dashboard routes not protected at route level | Scanner Site | 2 days |
| R07 | GSD-7 | No separate owner vs employee login flow | Scanner Site | 3 days |
| R08 | GSD-8 | Demo/test shortcuts on auth page | Scanner Site | 1 day |
| R09 | GSD-9 | localStorage auth fallback leaks to production | Scanner Site | 1 day |

### Auth & Credential Setup (3 items)

| Req | ID | Issue | Area | Effort |
|-----|------|-------|------|--------|
| R10 | GSD-46 | Create owner account in Supabase Auth | Supabase | 1 hr |
| R11 | GSD-47 | Create employee/scanner account in Supabase Auth | Supabase | 1 hr |
| R12 | GSD-48 | Wire AuthContext to use Supabase credentials | Scanner Site | 2 days |

---

## P1 High Priority — Fix Within 2 Weeks (26 items)

### Dashboard (6 items)

| Req | ID | Issue | Area | Effort |
|-----|------|-------|------|--------|
| R13 | GSD-10 | Revenue trend percentages are hardcoded | Owner Dashboard | 1 day |
| R14 | GSD-11 | ticket_count on orders always shows 0 | Owner Dashboard | 1 day |
| R15 | GSD-12 | ticket_type on orders always shows 'General' | Owner Dashboard | 1 day |
| R16 | GSD-13 | Staff performance uses raw user_id, not names | Owner Dashboard | 1 day |
| R17 | GSD-14 | Real-time subscription refetches entire dashboard | Owner Dashboard | 2 days |
| R18 | GSD-15 | Advanced Analytics too many tabs and metrics | Advanced Analytics | 2 days |

### Scanner (7 items)

| Req | ID | Issue | Area | Effort |
|-----|------|-------|------|--------|
| R19 | GSD-16 | No event date awareness (auto-detect tonight) | Scanner | 2 days |
| R20 | GSD-17 | Event dropdown doesn't show dates | Scanner | 1 day |
| R21 | GSD-18 | Offline mode accepts unknown tickets | Scanner | 1 day |
| R22 | GSD-19 | Failed scans not logged to server scan_logs | Scanner | 1 day |
| R23 | GSD-20 | Unsigned QR codes still accepted | Scanner | 1 day |
| R24 | GSD-21 | No rate limiting on manual entry | Scanner | 1 day |
| R25 | GSD-22 | No device ID shown to staff | Scanner | 1 day |

### VIP (3 items)

| Req | ID | Issue | Area | Effort |
|-----|------|-------|------|--------|
| R26 | GSD-23 | Floor plan visual only (no drag-drop) | VIP Floor Plan | 3 days |
| R27 | GSD-24 | Invite links require manual copy-paste | VIP Reservations | 2 days |
| R28 | GSD-25 | VIP table sync to purchase site not called | VIP Tables | 1 day |

### Events & SEO (2 items)

| Req | ID | Issue | Area | Effort |
|-----|------|-------|------|--------|
| R29 | GSD-26 | Hardcoded fallback events on marketing site | Marketing Site | 1 day |
| R30 | GSD-31 | No sitemap.xml, robots.txt, structured data | Marketing Site | 1 day |

### Code Quality (4 items)

| Req | ID | Issue | Area | Effort |
|-----|------|-------|------|--------|
| R31 | GSD-27 | orders-service.ts is 2,600 lines | Purchase Site | 3 days |
| R32 | GSD-28 | AuthContext.tsx is 840 lines | Purchase Site | 2 days |
| R33 | GSD-29 | 150+ components in flat directory | Scanner Site | 2 days |
| R34 | GSD-30 | TypeScript strict mode disabled | Marketing Site | 2 days |

### Credentials (4 items)

| Req | ID | Issue | Area | Effort |
|-----|------|-------|------|--------|
| R35 | GSD-49 | Verify .env files consistent across sites | All Sites | 1 hr |
| R36 | GSD-50 | Verify Stripe test keys functional | Purchase Site | 1 hr |
| R37 | GSD-51 | Verify Resend email API key active | Purchase Site | 1 hr |
| R38 | GSD-52 | Set all Vercel environment variables | Vercel | 1 hr |

---

## Bloat Cleanup — 20 items

### Remove from UI (5 items)

| Req | Bloat # | Feature | Recommendation |
|-----|---------|---------|----------------|
| R39 | B-1 | Circuit Breakers monitoring page | REMOVE from sidebar |
| R40 | B-2 | Rate Limits monitoring page | REMOVE from sidebar |
| R41 | B-3 | Query Performance monitoring page | REMOVE from sidebar |
| R42 | B-4 | Traces monitoring page | REMOVE from sidebar |
| R43 | B-18 | Scan Speed Analytics | REMOVE from sidebar |

### Simplify (6 items)

| Req | Bloat # | Feature | Recommendation |
|-----|---------|---------|----------------|
| R44 | B-5 | Errors monitoring page | SIMPLIFY to "System Health" indicator |
| R45 | B-6 | Metrics monitoring page | SIMPLIFY to KPI card |
| R46 | B-7 | Fraud Investigation page | SIMPLIFY to "Security Alerts" card |
| R47 | B-12 | Notification Rules page | SIMPLIFY to on/off toggles |
| R48 | B-13 | Advanced Analytics (6 tabs) | SIMPLIFY to 3 tabs (Revenue, Attendance, Staff) |
| R49 | B-10 | Customer Management page | SIMPLIFY to "VIP Guest List" |

### Assess / Conditional (5 items)

| Req | Bloat # | Feature | Recommendation |
|-----|---------|---------|----------------|
| R50 | B-8 | Queue Management + Predictions | KEEP if needed for events |
| R51 | B-14 | NFC scanning mode | HIDE behind feature flag |
| R52 | B-15 | ID Verification + photo capture | CONDITIONAL show |
| R53 | B-16 | Emergency Override system | SIMPLIFY to single button |
| R54 | B-19 | Battery Monitoring component | SIMPLIFY to icon-only |

### Other (4 items)

| Req | Bloat # | Feature | Recommendation |
|-----|---------|---------|----------------|
| R55 | B-9 | Staff Scheduling page | ASSESS necessity |
| R56 | B-11 | Device Management page | ASSESS necessity |
| R57 | B-17 | Floor Plan visual editor | FIX (drag-drop) or REMOVE |
| R58 | B-20 | 50+ markdown docs in project root | CONSOLIDATE |

---

## Verification Criteria

Each requirement is verified when:
1. Code change is implemented and committed
2. Feature works in local development
3. No regression in existing tests
4. Updated in Maguey-GSD-Framework.xlsx (Status → DONE, Verified? → YES)

## Phase Mapping

| Phase | Requirements Covered |
|-------|---------------------|
| 14 — Auth Foundation | R10, R11, R12, R09, R35, R36, R37 |
| 15 — Auth Hardening | R07, R08 |
| 16 — Route Protection | R06 |
| 17 — Security Lockdown | R01, R03, R05, R23 |
| 18 — Scanner Improvements | R19, R20, R21, R22, R24, R25 |
| 19 — Dashboard Data Accuracy | R13, R14, R15, R16, R17 |
| 20 — Bloat Cleanup | R18, R39–R58 |
| 21 — VIP & Events Polish | R26, R27, R28, R29, R30 |
| 22 — Code Quality | R31, R32, R33, R34 |
| 23 — CI/CD & Deployment | R02, R04, R38 |
